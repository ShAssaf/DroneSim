from src.drone.drone_agent import DroneAgent
from src.drone.misson_control import MissionControl, Mission
from src.environment.drones_server import DroneServer
from src.environment.pygame_handler import PygameHandler
from src.utils.util_classes import ThreeDVector


class Main:
    def __init__(self):
        self.drones_server = DroneServer()
        self.mission_control = MissionControl()
        self.pygame_handler = PygameHandler(self.drones_server.clients)


def main():
    pg = Main()
    for i in range(1):
        random_mission = Mission(start_point=ThreeDVector(4700, 5640, 0), target=ThreeDVector(2820, 4680, 0),
                                 path=[(4700, 5640, 0), (4700, 5640, 10), (4690, 5640, 20), (4680, 5630, 30),
                                       (4670, 5620, 40), (4660, 5610, 50), (4650, 5600, 60), (4640, 5590, 70),
                                       (4630, 5580, 80), (4620, 5570, 90), (4610, 5560, 100), (4600, 5550, 110),
                                       (4590, 5540, 120), (4580, 5530, 130), (4570, 5520, 140), (4560, 5510, 150),
                                       (4550, 5500, 140), (4540, 5490, 150), (4530, 5480, 140), (4520, 5470, 150),
                                       (4510, 5460, 150), (4500, 5450, 140), (4490, 5440, 150), (4480, 5430, 140),
                                       (4470, 5420, 130), (4460, 5410, 140), (4450, 5400, 150), (4440, 5390, 140),
                                       (4430, 5380, 140), (4420, 5370, 130), (4410, 5360, 130), (4400, 5350, 120),
                                       (4390, 5340, 110), (4380, 5330, 120), (4370, 5320, 130), (4360, 5310, 120),
                                       (4350, 5300, 130), (4340, 5290, 120), (4330, 5280, 130), (4320, 5270, 120),
                                       (4310, 5260, 130), (4300, 5250, 120), (4290, 5240, 110), (4280, 5230, 100),
                                       (4270, 5220, 100), (4260, 5210, 100), (4250, 5200, 90), (4240, 5190, 100),
                                       (4230, 5180, 100), (4220, 5170, 100), (4210, 5160, 100), (4200, 5150, 90),
                                       (4190, 5140, 100), (4180, 5130, 100), (4170, 5120, 90), (4160, 5110, 80),
                                       (4150, 5100, 90), (4140, 5090, 80), (4130, 5080, 90), (4120, 5070, 80),
                                       (4110, 5060, 80), (4100, 5050, 90), (4090, 5040, 100), (4080, 5030, 100),
                                       (4070, 5020, 90), (4060, 5010, 90), (4050, 5000, 80), (4040, 4990, 90),
                                       (4030, 4980, 100), (4020, 4970, 100), (4010, 4960, 110), (4000, 4950, 100),
                                       (3990, 4940, 110), (3980, 4930, 100), (3970, 4920, 100), (3960, 4910, 90),
                                       (3950, 4900, 80), (3940, 4890, 80), (3930, 4880, 80), (3920, 4870, 80),
                                       (3910, 4860, 90), (3900, 4850, 80), (3890, 4840, 90), (3880, 4830, 100),
                                       (3870, 4820, 100), (3860, 4810, 110), (3850, 4800, 120), (3840, 4790, 110),
                                       (3830, 4780, 120), (3820, 4770, 130), (3810, 4760, 130), (3800, 4750, 130),
                                       (3790, 4740, 140), (3780, 4730, 130), (3770, 4720, 120), (3760, 4710, 120),
                                       (3750, 4700, 130), (3740, 4690, 140), (3730, 4680, 140), (3720, 4670, 150),
                                       (3710, 4660, 160), (3700, 4650, 150), (3690, 4640, 150), (3680, 4630, 160),
                                       (3670, 4620, 150), (3660, 4610, 160), (3650, 4600, 160), (3640, 4590, 160),
                                       (3630, 4580, 170), (3620, 4570, 170), (3610, 4560, 160), (3600, 4550, 150),
                                       (3590, 4540, 160), (3580, 4530, 160), (3570, 4520, 170), (3560, 4510, 160),
                                       (3550, 4510, 150), (3540, 4510, 150), (3530, 4510, 150), (3520, 4500, 160),
                                       (3510, 4500, 170), (3500, 4490, 180), (3490, 4480, 190), (3480, 4490, 200),
                                       (3470, 4480, 200), (3460, 4480, 200), (3450, 4470, 190), (3440, 4470, 180),
                                       (3430, 4480, 190), (3420, 4490, 200), (3410, 4480, 190), (3400, 4470, 200),
                                       (3390, 4480, 200), (3380, 4490, 210), (3370, 4490, 210), (3360, 4500, 220),
                                       (3350, 4500, 230), (3340, 4500, 240), (3330, 4500, 240), (3320, 4510, 250),
                                       (3310, 4520, 240), (3300, 4530, 230), (3290, 4530, 230), (3280, 4540, 240),
                                       (3270, 4530, 250), (3260, 4520, 260), (3250, 4520, 250), (3240, 4520, 250),
                                       (3230, 4520, 240), (3220, 4530, 230), (3210, 4540, 240), (3200, 4550, 240),
                                       (3190, 4540, 230), (3180, 4540, 230), (3170, 4540, 220), (3160, 4530, 230),
                                       (3150, 4520, 220), (3140, 4530, 220), (3130, 4520, 230), (3120, 4530, 220),
                                       (3110, 4520, 220), (3100, 4530, 230), (3090, 4540, 240), (3080, 4540, 230),
                                       (3070, 4550, 240), (3060, 4560, 250), (3050, 4570, 240), (3040, 4570, 230),
                                       (3030, 4580, 220), (3020, 4590, 210), (3010, 4590, 200), (3000, 4590, 190),
                                       (2990, 4580, 180), (2980, 4570, 170), (2970, 4570, 160), (2960, 4560, 150),
                                       (2950, 4570, 140), (2940, 4560, 130), (2930, 4570, 120), (2920, 4580, 110),
                                       (2910, 4590, 100), (2900, 4600, 90), (2890, 4610, 80), (2880, 4620, 70),
                                       (2870, 4630, 60), (2860, 4640, 50), (2850, 4650, 40), (2840, 4660, 30),
                                       (2830, 4670, 20), (2820, 4680, 10), (2820, 4680, 0)]
                                 )
        d = DroneAgent(name=f"drone_{i}", initial_position=ThreeDVector(threeDtuple=random_mission.start_point))
        d.drone.mission_control.set_mission(random_mission)
        d.drone.mission_control.mission_start()
    pg.pygame_handler.start_simulation()  # todo move it to init


if __name__ == "__main__":
    main()
